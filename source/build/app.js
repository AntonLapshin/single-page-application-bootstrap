var fs=require("fs"),url=require("url"),path=require("path");exports.handler=function(e,t){var n=url.parse(e.url).pathname,r=path.join(__dirname,"www",n);fs.exists(r,function(n){console.log(e.url);if(!n){t.writeHead(404,{"Content-Type":"text/plain"}),t.write("404 Not Found\n"),t.end();return}var i={".html":"text/html",".css":"text/css",".js":"text/javascript"};fs.statSync(r).isDirectory()&&(console.log(new Date),fs.statSync(r).isDirectory()&&(r+="/index.html")),fs.readFile(r,"binary",function(e,n){if(e){t.writeHead(500,{"Content-Type":"text/plain"}),t.write(e+"\n"),t.end();return}var s={},o=i[path.extname(r)];o&&(s["Content-Type"]=o),t.writeHead(200,s),t.write(n,"binary"),t.end()})})};